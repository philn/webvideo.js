<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebCodecs Video Player Demo</title>
  <link href="./assets/fontawesome-free-5.15.4-web/css/solid.min.css" rel="stylesheet">
  <script type="module" src="./index.js"></script>
</head>
<style>

  * {
    box-sizing: border-box;
  }

  html, body {
    font-family: Meiryo, system-ui, sans-serif, "Font Awesome 5 Free";
    color: rgb(231, 233, 234);
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }
html {
	font-size: 2vmax;
	background:
		repeating-linear-gradient(
			100deg, hsl(243deg 100% 87%) 1vmax, 
			hsl(243deg 100% 93%) 2vmax, 
			hsl(240deg 100% 91%) 2.1vmax
		) top left;
}

  #app_root {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: min-content 1fr min-content;
    height: 100%;
    text-align: center;
  }

  code {
    font-family: monospace, sans-serif;
    font-size: 1em;
  }

  #explainer_area {
    display: flex;
    align-items: center;
    justify-content: center;
    padding-block: 1em;
    padding-inline: 10vw;
    font-size: 1.9vmax;
    font-weight: 900;
    text-wrap: balance;
    background: 
    	radial-gradient(50vw 50vw at center, rgb(210 210 255 / 0.95) 35vw, rgb(210 210 255 / 0.75) calc(100% - 5em));
    color: rgb(0 0 0);
  }

  #video_area, #monitor_area {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    min-height: 0;
    max-height: 100%;
  }
  
  #video_area {
  	background:	linear-gradient(
  		180deg,
  		rgb(210 210 255 / 0.75),
  		rgb(20 20 20 / 0.85)
  	);
  }
  
  #monitor_area {
    position: relative;
    background: rgb(0 0 0);
  }

  #play_btn_wrapper {
    background: rgba(0,0,0,0.5);
    color: white;
    font-weight: bold;
    font-size: 2.2vmax;
    border-radius: 1.15vmax;
    position: absolute;
    text-align: center;
    user-select: none;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    align-content: center;
  }

  #play_btn_wrapper:hover {
    opacity: 1 !important;
  }

  #play_btn {
    padding: 2.2vh 2.2vw;
  }

  #loader_wrapper {
    background: transparent;
    position: absolute;
    user-select: none;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    align-content: center;
  }

  img.loader_img {
  }

  canvas#monitor {
    display: block;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    min-height: 0;
    object-fit: contain;
  }

  #peak-meter {
    width: 3em;
    height: 100%;
    margin: 1em 0;
  }

  #title_area {
    display: grid;
    grid-template-columns: max-content 1fr;
  }
  
  #title_area > * {
    display: flex;
    align-items: end;
    margin-block: 0;
    padding-block: 1em;
    font-size: 1.5vmax;
  }
  
  #title_area h2 {
    justify-content: end;
    padding-inline: 10vw 0;
    background: 
    	linear-gradient(90deg, rgb(210 210 255 / 0.5), rgb(210 210 255 / 0.9) 7.5vw, rgb(210 210 255 / 1) 100%) 0 50%;
    color: rgb(0 0 0);
  }
  #title_area h3 {
    justify-content: start;
    padding-inline: 2em 10vw;
    border-top: 1px solid rgb(210 210 255 / 0.67);
    background: 
    	linear-gradient(100deg, rgb(210 210 255) 40%, transparent 42%, 48%, rgb(210 210 255) 50%, 57%, transparent 58%) 0% 50% / 2em 4em no-repeat,
    	linear-gradient(100deg, rgb(20 20 20 / 0.95) 33%, rgb(20 20 20 / 0.85) calc(100% - 5em));
  }
</style>
<body>

  <div id="app_root">

    <div id="explainer_area">
      <span>
        A simple video player made with WebCodecs and AudioWorklet, rendering to a <code>&lt;canvas&gt;</code> element.
      </span>
    </div>

    <div id="video_area">

      <div id="monitor_area">
        <div id="play_btn_wrapper"><div id="play_btn" style="display: block" class="fas"></div></div>
        <div id="loader_wrapper" style="display: none"><img class="loader_img" src="./assets/loader.svg"/></div>
        <canvas id="monitor" width="800" height="600"></canvas>
      </div>
      <div id="peak-meter"></div>

    </div>

    <footer id="title_area">
      <h2>Now playing</h2>
      <h3>[title_of_video]</h3>
    </footer>

  </div>

</body>
</html>
